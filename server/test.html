<script src="http://localhost:8090/socket.io/socket.io.js"></script>

<a href="?" onclick="sendUrl('prashant'); return false;">Send URL</a>
<br />
<span id="logs">TESTING</span>
<br />
<br />
<br />
<a href="?" onclick="getLast(); return false;">Get Last URLs</a>
<br />
<span id="lasturls">Last URLs</span>

<img id="screenshot" />
<script>
  var socket = io.connect('http://localhost:8090');
      document.getElementById('logs').innerHTML += "\n" + "Connected!";
  socket.on('newUrl', function(data) {
      alert('new url!');
      document.getElementById('logs').innerHTML += "\n" + data.url
  });
  socket.on('lastUrls', function(data) {
    document.getElementById('lasturls').innerHTML = "";
    for(var i = 0; i < data.urls.length; i++) {
        document.getElementById('lasturls').innerHTML += "<br>" + data.urls[i];
    }
  });
  socket.on('screenshot', function(data) {
    document.getElementById('screenshot').src = data.url;
  });
  
  function sendUrl(url) {
        socket.emit('newUrl', { url: url });
    }
    function getLast() {
        socket.emit('lastUrls', { });
    }
    
    function refreshImage() {
      socket.emit('screenshot', { });
    }
    setTimeout("refreshImage()", 5000);
</script>


